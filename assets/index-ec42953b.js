(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const q=["https://brasilapi.com.br/api/cep/v2/","https://cep.awesomeapi.com.br/json/"],b=document.querySelector(".cart__address"),D=async t=>(await Promise.any(q.map(async e=>fetch(`${e}${t}`)))).json(),H=async t=>{try{const e=await D(t);if(!e.address&&!e.street)throw new Error("CEP não encontrado");const r=e.address??e.street,c=e.district??e.neighborhood;b.innerHTML=`${r} - ${c} - ${e.city} - ${e.state}`}catch(e){console.error(e),b.innerHTML="CEP não encontrado"}},g=["https://api.mercadolibre.com/sites/MLB/search?","https://api.mercadolibre.com/items/","https://api.mercadolibre.com/sites/MLB/categories"],I=async t=>{if(!t)throw new Error("ID não informado");return(await fetch(`${g[1]}${t}`)).json()},W=async(t,e)=>{if(!t)throw new Error("Termo de busca não informado");return(await(await fetch(`${g[0]}${e}=${t}`)).json()).results},j=async()=>(await fetch(g[2])).json(),_=()=>{const t=localStorage.getItem("cartProducts");return t?JSON.parse(t):[]},A=t=>{if(!t)throw new Error("Você deve fornecer um ID");const r=[..._(),t];localStorage.setItem("cartProducts",JSON.stringify(r))},J=t=>{if(!t)throw new Error("Você deve fornecer um ID");const e=[..._()],r=e.indexOf(t);e.splice(r,1),localStorage.setItem("cartProducts",JSON.stringify(e))},f=t=>{const e=document.createElement("img");return e.className="product__image",e.src=t.replace("I.jpg","O.jpg"),e},s=(t,e,r="")=>{const c=document.createElement(t);return c.className=e,c.innerText=r,c},U=(t,e)=>{t.remove(),J(e)},$=t=>{const e=t.toString();return e.includes(".")?e[e.length-2]==="."?`${e}0`:e:`${e}.00`},N=({id:t,title:e,price:r,pictures:c})=>{const n=document.createElement("li");n.className="cart__product";const o=s("div","cart__product__image-container"),i=f(c[0].url);o.appendChild(i);const y=f((c[1]||c[0]).url);o.appendChild(y),n.appendChild(o);const h=s("div","cart__product__info-container");h.appendChild(s("span","product__title",e));const E=s("span","product__price","R$ ");E.appendChild(s("span","product__price__value",$(r))),h.appendChild(E),n.appendChild(h);const R=s("i","material-icons cart__product__remove","delete");return n.appendChild(R),n.addEventListener("click",()=>U(n,t)),n},F=({id:t,title:e,thumbnail:r,price:c})=>{const n=document.createElement("section");n.className="product",n.appendChild(s("span","product__id",t));const o=s("div","img__container");o.appendChild(f(r)),n.appendChild(o),n.appendChild(s("span","product__title",e));const i=s("span","product__price","R$ ");i.appendChild(s("span","product__price__value",$(c))),n.appendChild(i);const y=s("button","product__add","Adicionar ao carrinho!");return n.appendChild(y),n};const a=document.querySelector(".products"),T=document.querySelector("ol.cart__products"),V=document.querySelector(".total-price"),u=document.querySelector(".count-itens"),z=document.querySelector(".container-cartTitle"),K=document.querySelector(".input-group"),m=document.getElementById("logo-img"),Q=document.getElementById("input-label"),p=document.getElementById("search"),d=document.getElementById("container-categories"),P=document.getElementById("list-categories"),l=document.querySelector(".cart"),C=900,x=550,v=["category","q"],S=t=>t?`<section class="loading">
        <button class="btn" type="button" disabled>
          <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true">
          </span>
          Carregando...
        </button>
      </section>`:"",B=()=>{const t=document.querySelectorAll(".cart__product__info-container"),e=[...t];V.innerHTML=e.reduce((r,c,n)=>{const o=Number(t[n].lastChild.lastChild.innerText);return r+o},0).toFixed(2)},M=()=>{const t=document.querySelectorAll(".cart__product__info-container");t.length?(u.innerHTML=t.length,u.style.display="block"):(u.innerHTML=0,u.style.display="none",l.style.display="none",a.style.marginRight="0")},k=async()=>{const t=_();(await Promise.all(t.map(async r=>I(r)))).forEach(r=>{T.appendChild(N(r))}),B(),M()},O=t=>{a.innerHTML=`<section class="error">
  ${t.message}. Recarregue a página ou tente novamente!
  </section>`,console.error(t)},G=async()=>{const t=await j();P.innerHTML="",t.forEach(({id:e,name:r})=>{P.innerHTML+=`<li class="category">${r}
    <span class="id-category">${e}</span></li>`})},w=t=>{let e=JSON.parse(localStorage.getItem("preferences"));e?e[t]=e[t]?e[t]+1:1:e={[t]:1},localStorage.setItem("preferences",JSON.stringify(e))},X=t=>Math.round(Math.random()*t),L=async(t="computador",e)=>{a.innerHTML=S(!0);const r=await W(t,e);if(a.innerHTML=S(!1),!r.length)throw new Error("Busca inválida! Item não encontrado/existe");r.forEach(c=>a.appendChild(F(c)))},Y=async t=>{const e=t.parentNode.firstChild.innerText;A(e);const r=await I(e);w(r.category_id),T.appendChild(N(r))};(async function(){try{await G();const e=JSON.parse(localStorage.getItem("preferences"));let r;if(e)[r]=Object.entries(e).reduce((n,[o,i])=>i>n[1]?[o,i]:n,["",0]);else{const n=document.getElementsByClassName("id-category"),o=X(n.length-1);r=n[o].innerText}const c=r.includes("MLB")?0:1;await L(r,v[c]),await k()}catch(e){O(e)}})();K.addEventListener("submit",async t=>{t.preventDefault();try{const{value:e}=document.getElementById("search");await L(e,v[1]),w(e)}catch(e){O(e)}});document.addEventListener("click",async t=>{const e=t.target;if(e.classList.contains("product__add")&&await Y(e),e.classList.contains("category")){await L(e.lastChild.innerText,v[0]),w(e.lastChild.innerText),d.style.display="none";const r=d.style.display==="none";window.innerWidth>C&&(a.style.marginLeft=r?`${d.clientWidth}px`:"0")}else B(),M()});document.querySelector(".cep-button").addEventListener("click",async()=>{const{value:t}=document.querySelector(".cep-input");await H(t)});z.addEventListener("click",()=>{const t=l.style.display==="none";Number(u.innerText)&&(l.style.display=t?"flex":"none",window.innerWidth>C?a.style.marginRight=t?`${l.clientWidth}px`:"0":d.style.display=d.style.display!=="none"&&"none")});m.addEventListener("click",()=>{const t=d.style.display==="none";d.style.display=t?"block":"none",window.innerWidth>C?a.style.marginLeft=t?`${d.clientWidth}px`:"0":l.style.display=l.style.display!=="none"&&"none"});Q.addEventListener("click",t=>{t.preventDefault(),window.innerWidth<=x&&(p.classList.contains("invisibleResponse")?(p.classList.remove("invisibleResponse"),p.focus(),m.classList.add("invisibleResponse")):(p.classList.add("invisibleResponse"),m.classList.remove("invisibleResponse")))});window.addEventListener("resize",()=>{window.innerWidth>x&&m.classList.contains("invisibleResponse")&&(m.classList.remove("invisibleResponse"),p.classList.add("invisibleResponse"))});
